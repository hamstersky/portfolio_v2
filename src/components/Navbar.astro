---
import MenuIcon from 'icons/MenuIcon.astro';
import Button from './Button.astro';
import CloseIcon from 'icons/CloseIcon.astro';
import { Image } from 'astro:assets';
import MeNavbar from '../assets/me_navbar.png';
---

<nav
  class="fixed z-20 flex w-screen flex-wrap items-center justify-between px-4 py-4 text-xl xl:px-12"
>
  <div class="flex w-screen justify-between md:w-auto">
    <a href="/" class="flex items-center space-x-2 font-serif">
      <Image src={MeNavbar} alt="Dominik" quality="max" />
      <span>Dominik Chomicki</span>
    </a>
    <button id="menu-button" class="md:hidden">
      <span id="menu-icon"><MenuIcon /></span>
      <span id="close-icon" class="hidden"><CloseIcon /></span>
    </button>
  </div>
  <div
    id="mobileMenu"
    class="hidden w-screen bg-white md:block md:h-auto md:w-auto md:bg-transparent"
  >
    <div
      class="flex flex-col space-y-4 py-4 md:flex-row md:items-center md:space-x-12 md:space-y-0 md:py-0"
    >
      <a class="w-fit hover:underline" href="/about">About</a>
      <a href="#contact">
        <Button type="primary">Contact</Button>
      </a>
    </div>
  </div>
</nav>

<script>
  const toggleMobileMenu = () => {
    const menu = document.getElementById('mobileMenu');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');

    menu?.classList.toggle('hidden');
    menuIcon?.classList.toggle('hidden');
    closeIcon?.classList.toggle('hidden');
  };

  const button = document.getElementById('menu-button');
  button?.addEventListener('click', () => {
    toggleMobileMenu();
  });

  const nav = document.getElementsByTagName('nav')[0];
  const scrollClass = ['bg-white', 'shadow-md'];

  window.addEventListener('scroll', function () {
    if (window.scrollY > 100) {
      nav.classList.add(...scrollClass);
    } else {
      nav.classList.remove(...scrollClass);
    }
  });
</script>
